!function(t){"use strict";var a=1;t.fn.multilevelNav=function(e){t(this).each(function(){function s(a,e,s){var n,i,d,o=0,h=e.closest("."+u),c=h.find("> ."+_+":first");h.find("."+f+":first a");"show"===a?(n="true",i="false"):"hide"!==a&&void 0!==a||(n="false",i="true"),o=c.children().outerHeight(),h.find("."+v+":first, ."+p+":first").attr("aria-expanded",n).css("pointer-events","none"),setTimeout(function(){h.find("."+v+", ."+p).css("pointer-events","")},F),"show"===a&&(h.addClass(b),d=r.find("."+b),d.length&&r.hasClass(W)&&l.navbarMenuBackdrop===!0&&t("body").addClass("js-menu-showing"),h.hasClass(k)&&r.hasClass(W)&&l.navbarMegaMenuBackdrop===!0&&t("body").addClass("js-mega-menu-showing"),s===!0?(c.addClass(y).css("height",o).attr("aria-hidden",i),setTimeout(function(){c.css("height","auto").removeClass(y).css("height",""),"on"===c.attr("data-hover-status")&&c.addClass(T)},F)):c.css("height","auto").attr("aria-hidden",i).css("height","").addClass(T)),"hide"===a&&(h.removeClass(b),d=r.find("."+b),!d.length&&r.hasClass(W)&&t("body").removeClass("js-menu-showing"),h.hasClass(k)&&!t("."+k).hasClass(b)&&r.hasClass(W)&&t("body").removeClass("js-mega-menu-showing"),s===!0?(c.addClass(y).removeClass(T).attr("aria-hidden",i).css({height:o,"min-height":o}),setTimeout(function(){c.css({height:"","min-height":""})},100),setTimeout(function(){c.removeClass(y)},F)):c.removeClass(T).attr("aria-hidden",i).css("height",""))}function n(a){var e=0;i().width<A&&a!==!1&&(B.children().each(function(){e+=t(this).outerHeight()}),B.hasClass(E)?(B.addClass(I).css("height",e).attr("aria-hidden","true").parent().find("."+C).attr("aria-expanded","false"),setTimeout(function(){B.removeClass(E).css("height","")},100),setTimeout(function(){B.removeClass(I)},G)):(B.addClass(I).addClass(E).css("height",e).attr("aria-hidden","false").parent().find("."+C).attr("aria-expanded","true"),setTimeout(function(){B.css("height","auto").css("height","").removeClass(I)},G))),a===!1&&(i().width<A?B.removeClass(E).attr("aria-hidden","true").parent().find("."+C).attr("aria-expanded","false"):B.attr("aria-hidden","false").parent().find("."+C).attr("aria-expanded","true"))}function i(){var t=window,a="inner";return"innerWidth"in window||(a="client",t=document.documentElement||document.body),{width:t[a+"Width"],height:t[a+"Height"]}}function d(){l.autoDirection===!0&&setTimeout(function(){t("."+u,j).each(function(){var a=t(this),e=a.offset().left-t("body").offset().left+2*a.outerWidth();e>i().width&&i().width>=A?a.addClass(M):a.removeClass(M)})},300)}function o(){l.expandActiveItem===!0&&t(".active",j).each(function(){var a=t(this);a.parents("li").last().addClass(L),a.addClass(L).parents("li."+u).addClass(L),t("."+L,j).each(function(){(0===N||j.closest("nav").hasClass(W)&&i().width<A&&0!==N)&&s("show",t(this),!1),j.closest("nav").hasClass(W)&&i().width>=A&&s("hide",t(this),!1)}),N=1})}var l,r=t(this),h="mln__list",c="mln__expander",u="mln__has-child",f="mln__child__nav",v="mln__toggle-btn",p="mln__toggle-link",m="mln__toggle-indicatior",g="mln__toggle-btn__symbol",C="mln__expand-btn",_="mln__child__collapse",w="mln__child__list",x="mln__child__mega-menu",b="mln__has-child--showing",k="mln__has-child--mega-menu",T="mln__child--overflow-visible",y="mln__child--transitioning",E="mln__expander--showing",I="mln__expander--transitioning",L="mln__expander--expand-on-load",M="mln__child--flow-left",z="mln--whole-link-expand",O="mln--top-level-whole-link-expand",W="mln--navbar",j=t("."+h,r),B=t("."+c,r),A=r.attr("data-mln-breakpoint"),D=1,H=1,N=0,Q="Toggle items under";l=t.extend({hoverIntent:!1,hoverIntentTimeout:250,autoClose:!0,toggleClickOnly:!1,autoDirection:!1,expandActiveItem:!1,wholeLinkExpand:!1,topLevelWholeLinkExpand:!1,keyboardNavigable:!1,navbarMenuBackdrop:!1,navbarMegaMenuBackdrop:!1},e);var q=t(window).width();if(t(window).resize(function(){var a=t(window).width();q!==a&&(this.resizeTO&&clearTimeout(this.resizeTO),this.resizeTO=setTimeout(function(){t(this).trigger("resizeEnd")},150)),q=a}),j.length){j.addClass(y);var F=1e3*j.css("transition-duration").replace("s","");j.removeClass(y);var G;if(B.length?(B.addClass(I),G=1e3*B.css("transition-duration").replace("s",""),B.removeClass(I)):G=null,t("."+C,r).on("click",function(){n()}),j.find("."+x).wrap('<div class="'+_+'" />').wrap('<div class="'+_+'__helper" />').closest("li").addClass(u),l.navbarMegaMenuBackdrop===!0&&t("body").append('<div class="mln-backdrop"></div>'),j.find("ul").each(function(){var a=t(this);if(a.siblings("."+_).length){var e=a.parent().find("."+_+"__helper");a.addClass(w).prependTo(e)}else a.closest("."+x).length||a.addClass(w).wrap('<div class="'+_+'" />').wrap('<div class="'+_+'__helper" />').closest("li").addClass(u)}),t(" > li",j).each(function(){t(this).addClass(h+"__item--top-level")}),j.find("."+x).length&&j.find("."+x).closest("li").addClass(k),t("."+u,j).each(function(){var a=t(this).find("> a");a.wrap('<div class="'+f+'"></div>')}),t("."+f,j).each(function(){var a=t(this),e=a.find("> a"),s=e.text();a.append('<button class="'+v+'" type="button"> <span class="'+g+'"></span> '+Q+" "+s+"</button>")}),t("."+_,j).each(function(){var e=t(this);e.attr("aria-hidden","true").attr("data-hover-status","off").attr("id","mln"+a+"ChildCollapse"+D).parent().find("."+v).attr("aria-expanded","false").attr("aria-haspopup","true").attr("aria-controls","mln"+a+"ChildCollapse"+D),D++}),B.each(function(){var e=t(this);e.attr("aria-hidden","true").attr("id","mln"+a+"Expander"+H).parent().find("."+C).attr("aria-haspopup","true").attr("aria-expanded","false").attr("aria-controls","mln"+a+"Expander"+H),H++}),l.wholeLinkExpand===!0||l.topLevelWholeLinkExpand===!0){var J;l.wholeLinkExpand===!0&&(J=t("."+f+" > a",j),t(j).closest(".mln").addClass(z)),l.topLevelWholeLinkExpand===!0&&(J=t("> ."+u,j).find("> ."+f+" > a")||t("> ."+u,j).siblings("."+u).find("> ."+f+" > a"),t(j).closest(".mln").removeClass(z).addClass(O)),J.each(function(){var a=t(this),e=t(this).closest("."+u).find("."+v+":first"),s=e.attr("aria-expanded"),n=e.attr("aria-controls"),i=e.attr("aria-haspopup");t('<div class="'+m+'"><span class="'+g+'"></span></div>').appendTo(a),a.addClass(p).attr("role","button").attr("aria-expanded",s).attr("aria-controls",n).attr("aria-haspopup",i).on("click",function(t){a.focus(),t.preventDefault(),e.trigger("click")})})}t("."+v,j).on("click",function(a){var e=t(this),n=e.closest("."+u),d=e.closest(n).find("."+_+":first"),o=n.parent().find("."+b).not(n);i().width>=A&&l.autoClose===!0&&(d.attr("data-hover-status","off"),s("hide",o,!0)),e.closest("."+u).hasClass(b)?(s("hide",e,!0),d.attr("data-hover-status","off")):(s("show",e,!0),d.attr("data-hover-status","on"))}),l.hoverIntent===!0&&l.toggleClickOnly===!1?t("."+u,j).each(function(){var a=t(this),e=a.find("."+_+":first");a.hoverIntent({over:function(){e.attr("data-hover-status","on"),i().width>=A&&s("show",a,!0)},timeout:l.hoverIntentTimeout,out:function(){e.attr("data-hover-status","off"),i().width>=A&&"false"===e.attr("aria-hidden")&&s("hide",a,!0)},delay:l.hoverIntentTimeout})}):l.toggleClickOnly===!1&&t("."+u,j).each(function(){var a=t(this),e=a.find("."+_+":first");a.hover(function(){i().width>=A&&(t(this).closest("."+u).hasClass(b)?(e.attr("data-hover-status","off"),s("hide",t(this),!0)):(e.attr("data-hover-status","on"),s("show",t(this),!0)))})}),j.each(function(){t(this).on("keydown",function(a){var e=a.keyCode;if(27===e){var n=t(a.target),i=n.closest("."+b);i.length&&(i.closest("."+u).find("."+v+", ."+p).get(0).focus(),s("hide",i,!0))}})}),t(document).on("click",function(a){0===t(a.target).closest("."+h+" > li, ."+C,r).length&&l.autoClose===!0&&i().width>=A&&l.expandActiveItem===!1&&!t("body").find("."+y).length&&s("hide",t("."+b,r),!0)}),t(window).bind("resizeEnd",function(){i().width>=A&&l.autoClose===!0&&l.expandActiveItem===!1&&(s("hide",t("."+b,r),!1),B.css("height","").removeClass(E)),o(),n(!1),d()}),o(),n(!1),d()}}),a++}}(jQuery);